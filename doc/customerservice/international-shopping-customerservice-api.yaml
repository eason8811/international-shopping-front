openapi: 3.1.0
info:
  title: 默认模块
  description: >
    - 统一鉴权：Cookie 会话（HttpOnly `access_token`）<br/> - 统一返回包裹结构（所有 HTTP
    状态码均使用相同结构）<br/> - CSRF 防护：双提交（Header: `X-CSRF-Token` 与 Cookie: `csrf_token`
    必须相等）<br/> - 匿名接口：显式 `security: []`<br/>
  version: 1.3.0
tags:
  - name: customerservice
  - name: customerservice/UserTickets
  - name: customerservice/AdminTickets
  - name: customerservice/AdminReships
  - name: customerservice/Websocket
  - name: UserTickets
  - name: AdminTickets
  - name: AdminReships
paths:
  /users/me/tickets:
    get:
      summary: 用户侧分页查询工单列表
      deprecated: false
      description: |
        返回当前登录用户可见的工单列表,
        默认按 `created_at desc` 排序,
        仅返回用户可见字段 (不返回内部审计与内部备注)
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 200
        - name: status
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - OPEN
              - IN_PROGRESS
              - AWAITING_USER
              - AWAITING_CARRIER
              - ON_HOLD
              - RESOLVED
              - REJECTED
              - CLOSED
            x-apifox-enum:
              - value: OPEN
                name: ''
                description: ''
              - value: IN_PROGRESS
                name: ''
                description: ''
              - value: AWAITING_USER
                name: ''
                description: ''
              - value: AWAITING_CARRIER
                name: ''
                description: ''
              - value: ON_HOLD
                name: ''
                description: ''
              - value: RESOLVED
                name: ''
                description: ''
              - value: REJECTED
                name: ''
                description: ''
              - value: CLOSED
                name: ''
                description: ''
        - name: issue_type
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - REFUND
              - RESHIP
              - CLAIM
              - DELIVERY
              - ADDRESS
              - PRODUCT
              - PAYMENT
              - OTHER
            x-apifox-enum:
              - value: REFUND
                name: ''
                description: ''
              - value: RESHIP
                name: ''
                description: ''
              - value: CLAIM
                name: ''
                description: ''
              - value: DELIVERY
                name: ''
                description: ''
              - value: ADDRESS
                name: ''
                description: ''
              - value: PRODUCT
                name: ''
                description: ''
              - value: PAYMENT
                name: ''
                description: ''
              - value: OTHER
                name: ''
                description: ''
        - name: order_no
          in: query
          description: 订单号 (orders.order_no)
          required: false
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: shipment_no
          in: query
          description: 物流单号 (shipment.shipment_no)
          required: false
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: created_from
          in: query
          description: ''
          required: false
          schema:
            type: string
            format: date-time
        - name: created_to
          in: query
          description: ''
          required: false
          schema:
            type: string
            format: date-time
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJA0Y9TMJWQMENF9YK8RG106:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/UserTicketSummary'
                        description: 业务数据（随具体接口定义）
                    required: []
                x-apifox-orders:
                  - 01KJA0Y9TMJWQMENF9YK8RG106
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserTicketSummary'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556772-run
    post:
      summary: 用户侧创建工单
      deprecated: false
      description: >
        创建售后工单统一入口,

        支持 issue_type:
        `REFUND/RESHIP/CLAIM/DELIVERY/ADDRESS/PRODUCT/PAYMENT/OTHER`,

        仅创建协同工单,

        不直接触发资金退款,

        资金退款仍由 orders/payment 领域执行,


        去重语义,

        对应数据库唯一键 `uk_ticket_open_dedupe`,

        同一用户在同一 `order_id_nvl + shipment_id_nvl + issue_type` 下,

        同时只允许存在一张进行中工单
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketCreateRequest'
            examples: {}
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJA3N2VPKPDY1NFHXRANB9D1:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketCreateData'
                    required: []
                x-apifox-orders:
                  - 01KJA3N2VPKPDY1NFHXRANB9D1
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketCreateData'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 已创建
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 4
        '422':
          $ref: '#/components/responses/无法处理的实体'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556773-run
  /users/me/tickets/{ticket_no}:
    get:
      summary: 用户侧查询工单详情
      deprecated: false
      description: |
        返回当前用户有权限查看的单张工单详情,
        仅返回行业常见可展示字段,
        内部字段 (如内部审计 source_ref, extra 等) 不向用户透出
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJA4C97XB3Y8A26MJKFFM6YK:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/UserTicketDetail'
                    required: []
                x-apifox-orders:
                  - 01KJA4C97XB3Y8A26MJKFFM6YK
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/UserTicketDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556774-run
  /users/me/tickets/{ticket_no}/close:
    post:
      summary: 用户侧关闭工单
      deprecated: false
      description: |
        用户主动关闭工单,
        语义等价于状态推进到 `CLOSED`
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketCloseRequest'
            examples: {}
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBSFHPYVASY2A2SS47CY9YA:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/UserTicketDetail'
                    required: []
                x-apifox-orders:
                  - 01KJBSFHPYVASY2A2SS47CY9YA
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/UserTicketDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556776-run
  /users/me/tickets/{ticket_no}/messages:
    get:
      summary: 用户侧查询工单消息列表
      deprecated: false
      description: |
        默认按时间倒序分页返回消息,
        用户侧只返回允许外显的消息,
        不返回内部可见消息,
        消息编辑/撤回状态通过字段 `edited_at/recalled_at` 体现,
        支持使用 `after_id` + `order=asc` 进行断线后的增量补偿
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: before_id
          in: query
          description: 向前翻页锚点 (消息主键 id)
          required: false
          schema:
            type: integer
            minimum: 1
        - name: size
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: after_id
          in: query
          description: 向后增量补偿锚点 (仅返回 id > after_id 的消息)
          required: false
          schema:
            type: integer
            minimum: 1
        - name: order
          in: query
          description: 排序方向, `desc` 用于历史分页, `asc` 用于断线补偿
          required: false
          schema:
            type: string
            enum:
              - desc
              - asc
            x-apifox-enum:
              - value: desc
                name: ''
                description: ''
              - value: asc
                name: ''
                description: ''
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBT5GKTSXJ60YZ6C8K7NDVF:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TicketMessage'
                        description: 业务数据（随具体接口定义）
                    required: []
                x-apifox-orders:
                  - 01KJBT5GKTSXJ60YZ6C8K7NDVF
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketMessage'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556777-run
    post:
      summary: 用户侧发送工单消息
      deprecated: false
      description: >
        消息发送幂等键为 `client_message_id`,

        对应唯一键 `uk_msg_client_dedupe (ticket_id, sender_type, sender_user_id_nvl,
        client_message_id)`,

        重试发送应复用同一 `client_message_id`
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketMessageCreateRequest'
            examples: {}
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBTA79F53BQB2H8YB7Z2G5W:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketMessage'
                    required: []
                x-apifox-orders:
                  - 01KJBTA79F53BQB2H8YB7Z2G5W
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketMessage'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 已创建
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556778-run
  /users/me/ws-sessions:
    post:
      summary: 用户侧创建消息实时通道会话
      deprecated: false
      description: |-
        签发短期 `ws_token` 用于建立 WebSocket 连接,
        `ws_token` 仅用于实时通道, 过期需重新申请
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CsWsSessionCreateRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJEKYXJ9X3TGQGBNXAHHZAY1:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/CsWsSessionIssueData'
                    required: []
                x-apifox-orders:
                  - 01KJEKYXJ9X3TGQGBNXAHHZAY1
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/CsWsSessionIssueData'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-420337738-run
  /users/me/tickets/{ticket_no}/messages/{message_no}:
    patch:
      summary: 用户侧编辑消息
      deprecated: false
      description: |
        仅消息发送者可编辑,
        仅未撤回消息可编辑,
        编辑后更新 `edited_at`
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: message_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketMessageUpdateRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBTDWSCTY95J8MWEXG5T3AX:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketMessage'
                    required: []
                x-apifox-orders:
                  - 01KJBTDWSCTY95J8MWEXG5T3AX
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketMessage'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556779-run
  /users/me/tickets/{ticket_no}/messages/{message_no}/recall:
    post:
      summary: 用户侧撤回消息
      deprecated: false
      description: |
        仅消息发送者可撤回,
        撤回后更新 `recalled_at`,
        不保留已撤回信息内容，将内容替换为占位文案
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: message_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketMessageRecallRequest'
            examples: {}
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBTG3DF8N0RV8VNFPHH4A0P:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketMessage'
                    required: []
                x-apifox-orders:
                  - 01KJBTG3DF8N0RV8VNFPHH4A0P
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketMessage'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556780-run
  /users/me/tickets/{ticket_no}/read:
    post:
      summary: 用户侧标记工单消息已读
      deprecated: false
      description: |
        更新当前用户在该工单下的 `last_read_message_id/last_read_at`,
        重复提交同一消息位置应保持幂等
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketReadRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Result'
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556781-run
  /users/me/tickets/{ticket_no}/status-logs:
    get:
      summary: 用户侧查询工单状态流转日志
      deprecated: false
      description: 返回用户可见的工单状态变更时间线
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 200
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBTWPWR0Q9GC3B9DSVG3T92:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TicketStatusLog'
                        description: 业务数据（随具体接口定义）
                    required: []
                x-apifox-orders:
                  - 01KJBTWPWR0Q9GC3B9DSVG3T92
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStatusLog'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556782-run
  /users/me/tickets/{ticket_no}/reships:
    get:
      summary: 用户侧查询工单下的补发单关联的物流单列表
      deprecated: false
      description: ''
      tags:
        - customerservice/UserTickets
        - UserTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_no
          in: path
          description: ''
          required: true
          example: ''
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBWZ2TVZDTYAGH992QQWEH8:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/ShipmentSummary'
                        description: 业务数据（随具体接口定义）
                    required: []
                x-apifox-orders:
                  - 01KJBWZ2TVZDTYAGH992QQWEH8
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ShipmentSummary'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/UserTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556783-run
  /admin/tickets:
    get:
      summary: 管理侧分页检索工单
      deprecated: false
      description: |
        支持多维筛选,
        覆盖看板, 坐席工作台, SLA 预警等场景,
        默认按 `priority desc, created_at desc`
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 200
        - name: ticket_no
          in: query
          description: ''
          required: false
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: user_id
          in: query
          description: ''
          required: false
          schema:
            type: integer
            minimum: 1
        - name: order_id
          in: query
          description: ''
          required: false
          schema:
            type: integer
            minimum: 1
        - name: shipment_id
          in: query
          description: ''
          required: false
          schema:
            type: integer
            minimum: 1
        - name: issue_type
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - REFUND
              - RESHIP
              - CLAIM
              - DELIVERY
              - ADDRESS
              - PRODUCT
              - PAYMENT
              - OTHER
            x-apifox-enum:
              - value: REFUND
                name: ''
                description: ''
              - value: RESHIP
                name: ''
                description: ''
              - value: CLAIM
                name: ''
                description: ''
              - value: DELIVERY
                name: ''
                description: ''
              - value: ADDRESS
                name: ''
                description: ''
              - value: PRODUCT
                name: ''
                description: ''
              - value: PAYMENT
                name: ''
                description: ''
              - value: OTHER
                name: ''
                description: ''
        - name: status
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - OPEN
              - IN_PROGRESS
              - AWAITING_USER
              - AWAITING_CARRIER
              - ON_HOLD
              - RESOLVED
              - REJECTED
              - CLOSED
            x-apifox-enum:
              - value: OPEN
                name: ''
                description: ''
              - value: IN_PROGRESS
                name: ''
                description: ''
              - value: AWAITING_USER
                name: ''
                description: ''
              - value: AWAITING_CARRIER
                name: ''
                description: ''
              - value: ON_HOLD
                name: ''
                description: ''
              - value: RESOLVED
                name: ''
                description: ''
              - value: REJECTED
                name: ''
                description: ''
              - value: CLOSED
                name: ''
                description: ''
        - name: priority
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - LOW
              - NORMAL
              - HIGH
              - URGENT
            x-apifox-enum:
              - value: LOW
                name: ''
                description: ''
              - value: NORMAL
                name: ''
                description: ''
              - value: HIGH
                name: ''
                description: ''
              - value: URGENT
                name: ''
                description: ''
        - name: assigned_to_user_id
          in: query
          description: ''
          required: false
          schema:
            type: integer
            minimum: 1
        - name: claim_external_id
          in: query
          description: ''
          required: false
          schema:
            type: string
            maxLength: 128
        - name: sla_due_from
          in: query
          description: ''
          required: false
          schema:
            type: string
            format: date-time
        - name: sla_due_to
          in: query
          description: ''
          required: false
          schema:
            type: string
            format: date-time
        - name: created_from
          in: query
          description: ''
          required: false
          schema:
            type: string
            format: date-time
        - name: created_to
          in: query
          description: ''
          required: false
          schema:
            type: string
            format: date-time
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBZ6ZPCDC44SRQYFZ4SYCXE:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/AdminTicketSummary'
                        description: 业务数据（随具体接口定义）
                x-apifox-orders:
                  - 01KJBZ6ZPCDC44SRQYFZ4SYCXE
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/AdminTicketSummary'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556786-run
  /admin/tickets/{ticket_id}:
    get:
      summary: 管理侧查询工单详情
      deprecated: false
      description: 返回工单完整字段与关联信息
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBZJ6EGFJ6GN5CZQKBF7JEF:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/AdminTicketDetail'
                    required: []
                x-apifox-orders:
                  - 01KJBZJ6EGFJ6GN5CZQKBF7JEF
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/AdminTicketDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556787-run
    patch:
      summary: 管理侧更新工单元数据
      deprecated: false
      description: |
        允许更新非状态机字段,
        如 priority, tags, sla_due_at, requested_refund_amount, currency,
        状态推进请使用 `/status`
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminTicketPatchRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBZNAK4BTTX9HM0PWGNHV4B:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/AdminTicketDetail'
                    required: []
                x-apifox-orders:
                  - 01KJBZNAK4BTTX9HM0PWGNHV4B
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/AdminTicketDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556788-run
  /admin/tickets/{ticket_id}/assign:
    post:
      summary: 管理侧指派或转派工单
      deprecated: false
      description: |
        指派动作会写入 `cs_ticket_assignment_log`,
        action_type 支持,
        - ASSIGN,
        - REASSIGN,
        - UNASSIGN,
        - AUTO_ASSIGN
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminTicketAssignRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJBZQX12HMAAAZKCC1RABQ3W:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/AdminTicketDetail'
                    required: []
                x-apifox-orders:
                  - 01KJBZQX12HMAAAZKCC1RABQ3W
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/AdminTicketDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556789-run
  /admin/tickets/{ticket_id}/status:
    post:
      summary: 管理侧更新工单状态
      deprecated: false
      description: >
        允许变更角色,

        - ASSIGNEE

        - COLLABORATOR

        不允许变更角色,

        - WATCHER


        状态流转遵循统一矩阵: 

        | From \ To            | OPEN | IN_PROGRESS | AWAITING_USER |
        AWAITING_CARRIER | ON_HOLD | RESOLVED | REJECTED | CLOSED |

        | -------------------- | ---: | ----------: | ------------: |
        ---------------: | ------: | -------: | -------: | -----: |

        | OPEN                 |    - |           Y |             Y
        |                Y |       Y |        - |        Y |      Y |

        | IN_PROGRESS          |    - |           - |             Y
        |                Y |       Y |        Y |        Y |      Y |

        | AWAITING_USER        |    - |           Y |             -
        |                - |       Y |        Y |        Y |      Y |

        | AWAITING_CARRIER     |    - |           Y |             -
        |                - |       Y |        Y |        Y |      Y |

        | ON_HOLD              |    - |           Y |             Y
        |                Y |       - |        Y |        Y |      Y |

        | RESOLVED             |    - |     Y (7 天内复开) |        -
        |                - |       - |        - |        - |      Y |

        | REJECTED             |    - |     Y (7 天内复开) |        -
        |                - |       - |        - |        - |      Y |

        | CLOSED               |    - |           - |             -
        |                - |       - |        - |        - |      - |


        同时支持自动任务落日志,

        - `AWAITING_USER -> CLOSED`, note=`USER_TIMEOUT`,
        actor_type=`SCHEDULER`,

        - `RESOLVED -> CLOSED`, note=`AUTO_CLOSE_AFTER_RESOLVE`,
        actor_type=`SCHEDULER`
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketStatusTransitionRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC03W9NZ2VMD096PX69TQ97:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/AdminTicketDetail'
                    required: []
                x-apifox-orders:
                  - 01KJC03W9NZ2VMD096PX69TQ97
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/AdminTicketDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556790-run
  /admin/tickets/{ticket_id}/messages:
    get:
      summary: 管理侧查询工单消息列表
      deprecated: false
      description: |-
        默认按时间倒序分页返回消息,
        支持使用 `after_id` + `order=asc` 进行断线后的增量补偿
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: before_id
          in: query
          description: 向前翻页锚点 (消息主键 id)
          required: false
          schema:
            type: integer
            minimum: 1
        - name: after_id
          in: query
          description: 向后增量补偿锚点 (仅返回 id > after_id 的消息)
          required: false
          schema:
            type: integer
            minimum: 1
        - name: order
          in: query
          description: 排序方向, `desc` 用于历史分页, `asc` 用于断线补偿
          required: false
          schema:
            type: string
            enum:
              - desc
              - asc
            x-apifox-enum:
              - value: desc
                name: ''
                description: ''
              - value: asc
                name: ''
                description: ''
        - name: size
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 100
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC08E018XAPGXMXRMG17HQY:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TicketMessage'
                        description: 业务数据（随具体接口定义）
                x-apifox-orders:
                  - 01KJC08E018XAPGXMXRMG17HQY
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketMessage'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556791-run
    post:
      summary: 管理侧发送工单消息
      deprecated: false
      description: |
        消息发送幂等键使用 `client_message_id`,
        对于坐席侧弱网重试, 请复用同一 `client_message_id`
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketMessageCreateRequest'
            examples: {}
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC0DGHBQG9D483K65XC1V66:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketMessage'
                    required: []
                x-apifox-orders:
                  - 01KJC0DGHBQG9D483K65XC1V66
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketMessage'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 已创建
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556792-run
  /admin/ws-sessions:
    post:
      summary: 管理侧创建消息实时通道会话
      deprecated: false
      description: |-
        签发短期 `ws_token` 用于建立 WebSocket 连接,
        管理侧可订阅多个工单范围
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CsWsSessionCreateRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJEPJ4NW7VX2T1PBCCHPSGBY:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/CsWsSessionIssueData'
                    required: []
                x-apifox-orders:
                  - 01KJEPJ4NW7VX2T1PBCCHPSGBY
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/CsWsSessionIssueData'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-420338311-run
  /admin/tickets/{ticket_id}/read:
    post:
      summary: 管理侧标记工单消息已读
      deprecated: false
      description: 更新当前坐席在该工单下的已读位点
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketReadRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Result'
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556793-run
  /admin/tickets/{ticket_id}/messages/{message_id}:
    patch:
      summary: 管理侧编辑消息
      deprecated: false
      description: |-
        仅消息发送者可编辑,
        仅未撤回消息可编辑,
        编辑后更新 `edited_at`
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: message_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketMessageUpdateRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC0Y8ME8GVRCC3NZQ315M6M:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketMessage'
                    required: []
                x-apifox-orders:
                  - 01KJC0Y8ME8GVRCC3NZQ315M6M
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketMessage'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556794-run
  /admin/tickets/{ticket_id}/messages/{message_id}/recall:
    post:
      summary: 管理侧撤回消息
      deprecated: false
      description: |-
        仅消息发送者可撤回,
        撤回后更新 `recalled_at`,
        不保留已撤回信息内容，将内容替换为占位文案
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: message_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TicketMessageRecallRequest'
            examples: {}
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC6Y863CAE2GQ2WSZ61N9B1:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketMessage'
                    required: []
                x-apifox-orders:
                  - 01KJC6Y863CAE2GQ2WSZ61N9B1
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketMessage'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556795-run
  /admin/tickets/{ticket_id}/participants:
    get:
      summary: 管理侧查询工单参与方
      deprecated: false
      description: ''
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC82DE513T8EWCTF00GWBDY:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TicketParticipant'
                        description: 业务数据（随具体接口定义）
                x-apifox-orders:
                  - 01KJC82DE513T8EWCTF00GWBDY
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketParticipant'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556796-run
    post:
      summary: 管理侧新增工单参与方
      deprecated: false
      description: |
        新增协作者/观察者等成员,
        与唯一键 `uk_ticket_participant` 对齐,
        同一类型同一用户在工单内只保留一条活跃记录
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminTicketParticipantCreateRequest'
            examples: {}
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC84X36QD8XKCBM94TG321G:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketParticipant'
                    required: []
                x-apifox-orders:
                  - 01KJC84X36QD8XKCBM94TG321G
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketParticipant'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 已创建
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 6
        '422':
          $ref: '#/components/responses/无法处理的实体'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556797-run
  /admin/tickets/{ticket_id}/participants/{participant_id}:
    patch:
      summary: 管理侧更新参与方角色
      deprecated: false
      description: ''
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: participant_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminTicketParticipantPatchRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC862MD9PQCMX2Q9NA6G44G:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/TicketParticipant'
                    required: []
                x-apifox-orders:
                  - 01KJC862MD9PQCMX2Q9NA6G44G
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/TicketParticipant'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556798-run
  /admin/tickets/{ticket_id}/participants/{participant_id}/leave:
    post:
      summary: 管理侧将参与方设为离开
      deprecated: false
      description: 将参与方 `left_at` 置为当前时间, 保留审计轨迹
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: participant_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Result'
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556799-run
  /admin/tickets/{ticket_id}/status-logs:
    get:
      summary: 管理侧查询工单状态流转日志
      deprecated: false
      description: ''
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 200
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC88GCY19DSDHM3SKAN0XYH:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TicketStatusLog'
                        description: 业务数据（随具体接口定义）
                x-apifox-orders:
                  - 01KJC88GCY19DSDHM3SKAN0XYH
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketStatusLog'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556800-run
  /admin/tickets/{ticket_id}/assignment-logs:
    get:
      summary: 管理侧查询工单指派日志
      deprecated: false
      description: ''
      tags:
        - customerservice/AdminTickets
        - AdminTickets
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 200
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC8AX0QW60MDGDSFR0DZS1G:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/TicketAssignmentLog'
                        description: 业务数据（随具体接口定义）
                x-apifox-orders:
                  - 01KJC8AX0QW60MDGDSFR0DZS1G
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/TicketAssignmentLog'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminTickets
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556801-run
  /admin/tickets/{ticket_id}/reships:
    post:
      summary: 管理侧基于工单创建补发单
      deprecated: false
      description: |
        仅协同层登记补发,
        需要显式传入补发明细,
        明细将写入 `aftersales_reship_item`
      tags:
        - customerservice/AdminReships
        - AdminReships
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: ticket_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminReshipCreateRequest'
            examples: {}
        required: true
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC8FYJ0KMJ84FMRAZY2ZHWZ:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/ReshipDetail'
                    required: []
                x-apifox-orders:
                  - 01KJC8FYJ0KMJ84FMRAZY2ZHWZ
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/ReshipDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 已创建
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/AdminReships
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556802-run
  /admin/reships:
    get:
      summary: 管理侧分页检索补发单
      deprecated: false
      description: ''
      tags:
        - customerservice/AdminReships
        - AdminReships
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: page
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 1
            minimum: 1
        - name: size
          in: query
          description: ''
          required: false
          schema:
            type: integer
            default: 20
            minimum: 1
            maximum: 200
        - name: reship_no
          in: query
          description: ''
          required: false
          schema:
            type: string
            minLength: 10
            maxLength: 32
        - name: order_id
          in: query
          description: ''
          required: false
          schema:
            type: integer
            minimum: 1
        - name: ticket_id
          in: query
          description: ''
          required: false
          schema:
            type: integer
            minimum: 1
        - name: status
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - INIT
              - APPROVED
              - FULFILLING
              - FULFILLED
              - CANCELLED
            x-apifox-enum:
              - value: INIT
                name: ''
                description: ''
              - value: APPROVED
                name: ''
                description: ''
              - value: FULFILLING
                name: ''
                description: ''
              - value: FULFILLED
                name: ''
                description: ''
              - value: CANCELLED
                name: ''
                description: ''
        - name: reason_code
          in: query
          description: ''
          required: false
          schema:
            type: string
            enum:
              - LOST
              - DAMAGED
              - OTHER
            x-apifox-enum:
              - value: LOST
                name: ''
                description: ''
              - value: DAMAGED
                name: ''
                description: ''
              - value: OTHER
                name: ''
                description: ''
        - name: created_from
          in: query
          description: ''
          required: false
          schema:
            type: string
            format: date-time
        - name: created_to
          in: query
          description: ''
          required: false
          schema:
            type: string
            format: date-time
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC8TZRWAP81S7REMB3XCQ7N:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/ReshipSummary'
                        description: 业务数据（随具体接口定义）
                x-apifox-orders:
                  - 01KJC8TZRWAP81S7REMB3XCQ7N
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ReshipSummary'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
      security: []
      x-apifox-folder: customerservice/AdminReships
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556803-run
  /admin/reships/{reship_id}:
    get:
      summary: 管理侧查询补发单详情
      deprecated: false
      description: ''
      tags:
        - customerservice/AdminReships
        - AdminReships
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: reship_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC90QPG6R8YVGF0V6MEA5FJ:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/ReshipDetail'
                    required: []
                x-apifox-orders:
                  - 01KJC90QPG6R8YVGF0V6MEA5FJ
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/ReshipDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminReships
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556804-run
    patch:
      summary: 管理侧更新补发单元数据
      deprecated: false
      description: |
        用于补充成本与备注信息,
        状态推进请使用 `/status`
      tags:
        - customerservice/AdminReships
        - AdminReships
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: reship_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminReshipPatchRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC91ZQ1H0PKN9HG8TZREE2D:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/ReshipDetail'
                    required: []
                x-apifox-orders:
                  - 01KJC91ZQ1H0PKN9HG8TZREE2D
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/ReshipDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminReships
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556805-run
  /admin/reships/{reship_id}/status:
    post:
      summary: 管理侧推进补发单状态
      deprecated: false
      description: |
        补发状态机仅允许线性推进,
        - INIT -> APPROVED -> FULFILLING -> FULFILLED,
        仅在 `INIT` 与 `APPROVED` 允许取消,
        - INIT -> CANCELLED,
        - APPROVED -> CANCELLED
      tags:
        - customerservice/AdminReships
        - AdminReships
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: reship_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminReshipStatusTransitionRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC9505SMFQMS17RNG24YZD9:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        description: 业务数据（随具体接口定义）
                        $ref: '#/components/schemas/ReshipDetail'
                    required: []
                x-apifox-orders:
                  - 01KJC9505SMFQMS17RNG24YZD9
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    description: 业务数据（随具体接口定义）
                    $ref: '#/components/schemas/ReshipDetail'
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/AdminReships
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556806-run
  /admin/reships/{reship_id}/shipments:
    get:
      summary: 管理侧查询补发单关联物流单
      deprecated: false
      description: ''
      tags:
        - customerservice/AdminReships
        - AdminReships
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: reship_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC97KTX8Y5WP89H0XTH741W:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/ReshipShipment'
                        description: 业务数据（随具体接口定义）
                x-apifox-orders:
                  - 01KJC97KTX8Y5WP89H0XTH741W
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ReshipShipment'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
      security: []
      x-apifox-folder: customerservice/AdminReships
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556807-run
    post:
      summary: 管理侧绑定补发单与物流单
      deprecated: false
      description: |
        一个物流单最多只能关联一个补发单,
        对应唯一键 `uk_reship_one_shipment (shipment_id)`
      tags:
        - customerservice/AdminReships
        - AdminReships
      parameters:
        - name: access_token
          in: cookie
          description: 会话访问令牌 (HttpOnly Cookie)
          required: true
          example: ''
          schema:
            type: string
        - name: csrf_token
          in: cookie
          description: CSRF Cookie
          required: true
          example: ''
          schema:
            type: string
        - name: reship_id
          in: path
          description: ''
          required: true
          example: 0
          schema:
            type: integer
            minimum: 1
        - name: X-CSRF-Token
          in: header
          description: CSRF Header, 必须与 Cookie `csrf_token` 相等
          required: true
          example: ''
          schema:
            type: string
        - name: Idempotency-Key
          in: header
          description: 幂等键, 建议 UUID/ULID, 同键重复请求返回同一结果
          required: true
          example: ''
          schema:
            type: string
            maxLength: 64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AdminReshipBindShipmentsRequest'
            examples: {}
        required: true
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                x-apifox-refs:
                  01KJC9SJ6Q1VQ2JGFCKMKJ918Y:
                    $ref: '#/components/schemas/Result'
                    x-apifox-overrides:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/ReshipShipment'
                        description: 业务数据（随具体接口定义）
                x-apifox-orders:
                  - 01KJC9SJ6Q1VQ2JGFCKMKJ918Y
                properties:
                  success:
                    type: boolean
                    description: 业务是否成功（非 HTTP 含义）
                    examples:
                      - true
                  code:
                    type: string
                    description: 业务码
                    examples:
                      - OK
                    enum:
                      - OK
                      - CREATED
                      - ACCEPTED
                      - FOUND
                      - BAD_REQUEST
                      - UNAUTHORIZED
                      - FORBIDDEN
                      - NOT_FOUND
                      - CONFLICT
                      - UNPROCESSABLE_ENTITY
                      - TOO_MANY_REQUESTS
                      - INTERNAL_SERVER_ERROR
                    x-apifox-enum:
                      - value: OK
                        name: OK
                        description: 成功
                      - value: CREATED
                        name: Created
                        description: 已创建
                      - value: ACCEPTED
                        name: Accepted
                        description: 已接受
                      - value: FOUND
                        name: Found / Redirect
                        description: 重定向
                      - value: BAD_REQUEST
                        name: Bad Request
                        description: 参数错误
                      - value: UNAUTHORIZED
                        name: Unauthorized
                        description: 未授权
                      - value: FORBIDDEN
                        name: Forbidden
                        description: 没有权限
                      - value: NOT_FOUND
                        name: Not Found
                        description: 未找到
                      - value: CONFLICT
                        name: Conflict
                        description: 冲突
                      - value: UNPROCESSABLE_ENTITY
                        name: Unprocessable Entity
                        description: 不能处理的实体
                      - value: TOO_MANY_REQUESTS
                        name: Too Many Requests
                        description: 请求过多
                      - value: INTERNAL_SERVER_ERROR
                        name: Internal Server Error
                        description: 服务器内部错误
                  message:
                    type: string
                    description: 人类可读的简短信息
                    examples:
                      - OK
                  timestamp:
                    type: string
                    format: date-time
                    description: 服务器时间
                    examples:
                      - '2025-10-26T06:30:00.123Z'
                  traceId:
                    type:
                      - string
                      - 'null'
                    description: 请求追踪ID
                    examples:
                      - af9c5b1f0e2a4c1b
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/ReshipShipment'
                    description: 业务数据（随具体接口定义）
                  meta:
                    description: 附加元信息（分页等，可选）
                    type:
                      - object
                      - 'null'
                    properties:
                      page:
                        type: integer
                        examples:
                          - 1
                      size:
                        type: integer
                        examples:
                          - 20
                      total:
                        type: integer
                        examples:
                          - 135
                    x-apifox-orders:
                      - page
                      - size
                      - total
                    x-apifox-ignore-properties: []
                required:
                  - success
                  - code
                  - message
                  - timestamp
                x-apifox-ignore-properties:
                  - success
                  - code
                  - message
                  - timestamp
                  - traceId
                  - data
                  - meta
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
        '400':
          $ref: '#/components/responses/参数错误'
          description: ''
          x-apifox-ordering: 1
        '401':
          $ref: '#/components/responses/未鉴权'
          description: ''
          x-apifox-ordering: 2
        '403':
          $ref: '#/components/responses/权限不足'
          description: ''
          x-apifox-ordering: 3
        '404':
          $ref: '#/components/responses/未找到'
          description: ''
          x-apifox-ordering: 4
        '409':
          $ref: '#/components/responses/冲突'
          description: ''
          x-apifox-ordering: 5
      security: []
      x-apifox-folder: customerservice/AdminReships
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-419556808-run
  /:
    get:
      summary: 建立售后消息 WebSocket 连接
      deprecated: false
      description: >
        注意：此接口实际上为 `Websocket` 接口，接口 URL 通过 `/users/me/ws-sessions` 或
        `/admin/ws-sessions` 获取


        接口说明：

        使用 `ws_token` 进行握手认证,

        通过 `last_event_id` 支持断线续传,

        成功后服务端将按 `CsWsServerFrame` 推送帧



        帧级协议:

        - 客户端上行:
          - `CsWsClientPingFrame` (`type=ping`) 心跳探活
          - `CsWsClientAckFrame` (`type=ack`) 确认已处理到某个 `event_id`
        - 服务端下行:
          - `CsWsServerEventFrame` (`type=event`) 业务事件, 包含 `CsWsEventEnvelope`
          - `CsWsServerErrorFrame` (`type=error`) 协议/鉴权/续传错误


        `last_event_id` 续传失败回退策略:

        1) 服务端下发 `type=error` 且 `code in (RESUME_EXPIRED, RESUME_NOT_FOUND,
        RESUME_NOT_AVAILABLE)`,
           并携带 `fallback` 建议
        2) 客户端优先执行 `fallback.strategy=HTTP_CATCHUP_THEN_RECONNECT`,
           使用消息列表接口 `after_id` 增量补偿:
           - 用户侧: `GET /users/me/tickets/{ticket_no}/messages?after_id={fallback.suggest_after_id}&order=asc`
           - 管理侧: `GET /admin/tickets/{ticket_id}/messages?after_id={fallback.suggest_after_id}&order=asc`
        3) 完成补偿后重新建立 WS 连接:
           - 若继续带 `last_event_id`, 取最新已处理事件ID
           - 若服务端要求 `RECONNECT_WITHOUT_LAST_EVENT_ID`, 则不带该参数重连

        Websocket 连接URL参数：

        - `ws_token`: string, 必须, 由 `/users/me/ws-sessions` 或
        `/admin/ws-sessions` 签发的短期令牌

        - `last_event_id`: string, 非必须, 上次已成功处理的事件ID, 用于断线续传

        - `ticket_no`: string, 非必须, 可选, 用户侧指定单工单订阅范围

        - `ticket_id`: integer, 非必须, 可选, 管理侧指定单工单订阅范围
      tags:
        - customerservice/Websocket
      parameters:
        - name: ws_token
          in: query
          description: 由 `/users/me/ws-sessions` 或 `/admin/ws-sessions` 签发的短期令牌
          required: true
          schema:
            type: string
        - name: last_event_id
          in: query
          description: 非必须, 上次已成功处理的事件ID, 用于断线续传
          required: false
          schema:
            type: string
        - name: ticket_no
          in: query
          description: 可选, 用户侧指定单工单订阅范围
          required: false
          schema:
            type: string
        - name: ticket_id
          in: query
          description: 可选, 管理侧指定单工单订阅范围
          required: false
          schema:
            type: integer
      responses:
        '200':
          description: ''
          content:
            application/json:
              schema:
                anyOf:
                  - $ref: '#/components/schemas/CsWsServerEventFrame'
                  - $ref: '#/components/schemas/CsWsServerErrorFrame'
          headers: {}
          x-apifox-name: 成功
          x-apifox-ordering: 0
      security: []
      x-apifox-folder: customerservice/Websocket
      x-apifox-status: released
      x-run-in-apifox: https://app.apifox.com/web/project/7302473/apis/api-420376515-run
webhooks: {}
components:
  schemas:
    Result:
      type: object
      required:
        - success
        - code
        - message
        - timestamp
      properties:
        success:
          type: boolean
          description: 业务是否成功（非 HTTP 含义）
          examples:
            - true
        code:
          type: string
          description: 业务码
          examples:
            - OK
          enum:
            - OK
            - CREATED
            - ACCEPTED
            - FOUND
            - BAD_REQUEST
            - UNAUTHORIZED
            - FORBIDDEN
            - NOT_FOUND
            - CONFLICT
            - UNPROCESSABLE_ENTITY
            - TOO_MANY_REQUESTS
            - INTERNAL_SERVER_ERROR
          x-apifox-enum:
            - value: OK
              name: OK
              description: 成功
            - value: CREATED
              name: Created
              description: 已创建
            - value: ACCEPTED
              name: Accepted
              description: 已接受
            - value: FOUND
              name: Found / Redirect
              description: 重定向
            - value: BAD_REQUEST
              name: Bad Request
              description: 参数错误
            - value: UNAUTHORIZED
              name: Unauthorized
              description: 未授权
            - value: FORBIDDEN
              name: Forbidden
              description: 没有权限
            - value: NOT_FOUND
              name: Not Found
              description: 未找到
            - value: CONFLICT
              name: Conflict
              description: 冲突
            - value: UNPROCESSABLE_ENTITY
              name: Unprocessable Entity
              description: 不能处理的实体
            - value: TOO_MANY_REQUESTS
              name: Too Many Requests
              description: 请求过多
            - value: INTERNAL_SERVER_ERROR
              name: Internal Server Error
              description: 服务器内部错误
        message:
          type: string
          description: 人类可读的简短信息
          examples:
            - OK
        timestamp:
          type: string
          format: date-time
          description: 服务器时间
          examples:
            - '2025-10-26T06:30:00.123Z'
        traceId:
          type:
            - string
            - 'null'
          description: 请求追踪ID
          examples:
            - af9c5b1f0e2a4c1b
        data:
          type: object
          properties: {}
          x-apifox-orders: []
          description: 业务数据（随具体接口定义）
          x-apifox-ignore-properties: []
        meta:
          description: 附加元信息（分页等，可选）
          type:
            - object
            - 'null'
          properties:
            page:
              type: integer
              examples:
                - 1
            size:
              type: integer
              examples:
                - 20
            total:
              type: integer
              examples:
                - 135
          x-apifox-orders:
            - page
            - size
            - total
          x-apifox-ignore-properties: []
      x-apifox-orders:
        - success
        - code
        - message
        - timestamp
        - traceId
        - data
        - meta
      x-apifox-ignore-properties: []
      x-apifox-folder: user
    OrderStatus:
      type: string
      enum:
        - CREATED
        - PENDING_PAYMENT
        - PAID
        - CANCELLED
        - CLOSED
        - FULFILLED
        - REFUNDING
        - REFUNDED
      x-apifox-folder: orders
    ShipmentStatus:
      type: string
      description: >
        shipment 状态机：

        `CREATED/LABEL_CREATED/PICKED_UP/IN_TRANSIT/CUSTOMS_PROCESSING/CUSTOMS_HOLD/CUSTOMS_RELEASED/HANDED_OVER/OUT_FOR_DELIVERY/DELIVERED/EXCEPTION/RETURNED/CANCELLED/LOST`
      enum:
        - CREATED
        - LABEL_CREATED
        - PICKED_UP
        - IN_TRANSIT
        - CUSTOMS_PROCESSING
        - CUSTOMS_HOLD
        - CUSTOMS_RELEASED
        - HANDED_OVER
        - OUT_FOR_DELIVERY
        - DELIVERED
        - EXCEPTION
        - RETURNED
        - CANCELLED
        - LOST
      x-apifox-folder: shipping
    ShipmentSummary:
      type: object
      required:
        - id
        - shipment_no
        - status
        - currency
        - created_at
        - updated_at
      properties:
        id:
          type: integer
          format: int64
        shipment_no:
          type: string
          maxLength: 26
        order_id:
          type:
            - integer
            - 'null'
          format: int64
        order_no:
          type:
            - string
            - 'null'
        idempotency_key:
          type:
            - string
            - 'null'
          maxLength: 64
        carrier_code:
          type:
            - string
            - 'null'
          maxLength: 64
        carrier_name:
          type:
            - string
            - 'null'
          maxLength: 128
        service_code:
          type:
            - string
            - 'null'
          maxLength: 64
        tracking_no:
          type:
            - string
            - 'null'
          maxLength: 128
        ext_external_id:
          type:
            - string
            - 'null'
          maxLength: 128
        status:
          $ref: '#/components/schemas/ShipmentStatus'
        pickup_time:
          type:
            - string
            - 'null'
          format: date-time
        delivered_time:
          type:
            - string
            - 'null'
          format: date-time
        currency:
          type: string
          minLength: 3
          maxLength: 3
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      x-apifox-orders:
        - id
        - shipment_no
        - order_id
        - order_no
        - idempotency_key
        - carrier_code
        - carrier_name
        - service_code
        - tracking_no
        - ext_external_id
        - status
        - pickup_time
        - delivered_time
        - currency
        - created_at
        - updated_at
      x-apifox-ignore-properties: []
      x-apifox-folder: shipping
    CsWsSessionIssueData:
      type: object
      properties:
        ws_token:
          type: string
          description: WebSocket 短期访问令牌
          minLength: 16
          maxLength: 2048
        ws_url:
          type: string
          format: uri
          description: WebSocket 连接地址
          examples:
            - wss://api.example.com/ws/customerservice
        issued_at:
          type: string
          format: date-time
        expires_at:
          type: string
          format: date-time
        heartbeat_interval_seconds:
          type: integer
          minimum: 5
          maximum: 300
          description: 客户端建议心跳间隔（秒）
        resume_ttl_seconds:
          type: integer
          minimum: 30
          maximum: 86400
          description: 事件续传窗口（秒）
      required:
        - ws_token
        - ws_url
        - issued_at
        - expires_at
        - heartbeat_interval_seconds
        - resume_ttl_seconds
      x-apifox-orders:
        - ws_token
        - ws_url
        - issued_at
        - expires_at
        - heartbeat_interval_seconds
        - resume_ttl_seconds
      x-apifox-folder: customerservice
      x-apifox-ignore-properties: []
    CsWsConnectAck:
      type: object
      properties:
        connection_id:
          type: string
          maxLength: 64
        server_time:
          type: string
          format: date-time
        heartbeat_interval_seconds:
          type: integer
          minimum: 5
          maximum: 300
        resume_ttl_seconds:
          type: integer
          minimum: 30
          maximum: 86400
      required:
        - connection_id
        - server_time
        - heartbeat_interval_seconds
        - resume_ttl_seconds
      x-apifox-orders:
        - connection_id
        - server_time
        - heartbeat_interval_seconds
        - resume_ttl_seconds
      x-apifox-folder: customerservice
      x-apifox-ignore-properties: []
    CsWsTicketReadUpdatedEventData:
      type: object
      properties:
        ticket_id:
          type: integer
          minimum: 1
        participant_id:
          type: integer
          minimum: 1
        participant_type:
          $ref: '#/components/schemas/CsParticipantType'
        participant_user_id:
          type:
            - integer
            - 'null'
        last_read_message_id:
          type: integer
          minimum: 1
        last_read_at:
          type: string
          format: date-time
      required:
        - ticket_id
        - participant_id
        - participant_type
        - last_read_message_id
        - last_read_at
      x-apifox-orders:
        - ticket_id
        - participant_id
        - participant_type
        - participant_user_id
        - last_read_message_id
        - last_read_at
      x-apifox-folder: customerservice
      x-apifox-ignore-properties: []
    CsWsEventType:
      type: string
      enum:
        - WS_CONNECTED
        - MESSAGE_CREATED
        - MESSAGE_UPDATED
        - MESSAGE_RECALLED
        - TICKET_READ_UPDATED
        - TICKET_STATUS_CHANGED
        - TICKET_ASSIGNMENT_CHANGED
      x-apifox-folder: customerservice
    CsWsSessionCreateRequest:
      type: object
      properties:
        ticket_nos:
          type: array
          description: 可选, 指定订阅的工单号集合
          maxItems: 100
          items:
            type: string
            minLength: 10
            maxLength: 32
        ticket_ids:
          type: array
          description: 可选, 指定订阅的工单ID集合(管理侧常用)
          maxItems: 100
          items:
            type: integer
            minimum: 1
        event_types:
          type: array
          description: 可选, 指定订阅的事件类型集合
          maxItems: 20
          items:
            $ref: '#/components/schemas/CsWsEventType'
        last_event_id:
          type: string
          description: 可选, 续传锚点(已成功消费的最后事件ID)
          maxLength: 64
      x-apifox-orders:
        - ticket_nos
        - ticket_ids
        - event_types
        - last_event_id
      x-apifox-folder: customerservice
      x-apifox-ignore-properties: []
    CsWsEventEnvelope:
      type: object
      description: 统一 WebSocket 事件包裹
      properties:
        event_id:
          type: string
          maxLength: 64
          description: 事件唯一ID, 用于断线续传
        seq:
          type: integer
          minimum: 1
          description: 单连接内单调递增序号
        event_type:
          $ref: '#/components/schemas/CsWsEventType'
        occurred_at:
          type: string
          format: date-time
          description: 事件发生时间(服务端时间)
        ticket_id:
          type:
            - integer
            - 'null'
        ticket_no:
          type:
            - string
            - 'null'
        trace_id:
          type:
            - string
            - 'null'
          maxLength: 64
        data:
          anyOf:
            - $ref: '#/components/schemas/CsWsConnectAck'
            - $ref: '#/components/schemas/TicketMessage'
            - $ref: '#/components/schemas/CsWsTicketReadUpdatedEventData'
            - $ref: '#/components/schemas/TicketStatusLog'
            - $ref: '#/components/schemas/TicketAssignmentLog'
      required:
        - event_id
        - seq
        - event_type
        - occurred_at
        - data
      x-apifox-orders:
        - event_id
        - seq
        - event_type
        - occurred_at
        - ticket_id
        - ticket_no
        - trace_id
        - data
      x-apifox-folder: customerservice
      x-apifox-ignore-properties: []
    CsWsServerEventFrame:
      type: object
      description: 服务端下行事件帧
      properties:
        type:
          type: string
          enum:
            - event
        event:
          $ref: '#/components/schemas/CsWsEventEnvelope'
      required:
        - type
        - event
      x-apifox-orders:
        - type
        - event
      x-apifox-folder: customerservice
      x-apifox-ignore-properties: []
    CsWsErrorCode:
      type: string
      enum:
        - INVALID_FRAME
        - UNAUTHORIZED
        - FORBIDDEN
        - RATE_LIMITED
        - RESUME_EXPIRED
        - RESUME_NOT_FOUND
        - RESUME_NOT_AVAILABLE
      x-apifox-folder: customerservice
    CsWsResumeFallbackStrategy:
      type: string
      enum:
        - HTTP_CATCHUP_THEN_RECONNECT
        - RECONNECT_WITHOUT_LAST_EVENT_ID
      x-apifox-folder: customerservice
    CsWsResumeFallback:
      type: object
      properties:
        strategy:
          $ref: '#/components/schemas/CsWsResumeFallbackStrategy'
        suggest_after_id:
          type:
            - integer
            - 'null'
          minimum: 1
          description: 推荐用于 HTTP 增量补偿的 after_id
        retry_after_seconds:
          type:
            - integer
            - 'null'
          minimum: 1
          maximum: 3600
      required:
        - strategy
      x-apifox-orders:
        - strategy
        - suggest_after_id
        - retry_after_seconds
      x-apifox-folder: customerservice
      x-apifox-ignore-properties: []
    CsWsServerErrorFrame:
      type: object
      description: 服务端下行错误帧
      properties:
        type:
          type: string
          enum:
            - error
        code:
          $ref: '#/components/schemas/CsWsErrorCode'
        message:
          type: string
          maxLength: 255
        occurred_at:
          type: string
          format: date-time
        last_event_id:
          type:
            - string
            - 'null'
          maxLength: 64
          description: 服务端确认的最后可续传事件ID
        fallback:
          anyOf:
            - $ref: '#/components/schemas/CsWsResumeFallback'
            - type: 'null'
      required:
        - type
        - message
        - occurred_at
        - code
      x-apifox-orders:
        - type
        - code
        - message
        - occurred_at
        - last_event_id
        - fallback
      x-apifox-folder: customerservice
      x-apifox-ignore-properties: []
    CsTicketIssueType:
      type: string
      enum:
        - REFUND
        - RESHIP
        - CLAIM
        - DELIVERY
        - ADDRESS
        - PRODUCT
        - PAYMENT
        - OTHER
      x-apifox-folder: customerservice
    CsTicketStatus:
      type: string
      enum:
        - OPEN
        - IN_PROGRESS
        - AWAITING_USER
        - AWAITING_CARRIER
        - ON_HOLD
        - RESOLVED
        - REJECTED
        - CLOSED
      x-apifox-folder: customerservice
    CsTicketPriority:
      type: string
      enum:
        - LOW
        - NORMAL
        - HIGH
        - URGENT
      x-apifox-folder: customerservice
    CsTicketChannel:
      type: string
      enum:
        - CLIENT
        - ADMIN
        - API
        - SYSTEM
      x-apifox-folder: customerservice
    CsParticipantType:
      type: string
      enum:
        - USER
        - AGENT
        - MERCHANT
        - SYSTEM
        - BOT
      x-apifox-folder: customerservice
    CsParticipantRole:
      type: string
      enum:
        - OWNER
        - ASSIGNEE
        - COLLABORATOR
        - WATCHER
      x-apifox-folder: customerservice
    CsMessageType:
      type: string
      enum:
        - TEXT
        - IMAGE
        - FILE
        - SYSTEM_EVENT
        - RICH
      x-apifox-folder: customerservice
    CsActorType:
      type: string
      enum:
        - USER
        - AGENT
        - MERCHANT
        - SYSTEM
        - SCHEDULER
        - API
      x-apifox-folder: customerservice
    CsAssignmentActionType:
      type: string
      enum:
        - ASSIGN
        - REASSIGN
        - UNASSIGN
        - AUTO_ASSIGN
      x-apifox-folder: customerservice
    AfterSalesReshipReasonCode:
      type: string
      enum:
        - LOST
        - DAMAGED
        - OTHER
      x-apifox-folder: customerservice
    AfterSalesReshipStatus:
      type: string
      enum:
        - INIT
        - APPROVED
        - FULFILLING
        - FULFILLED
        - CANCELLED
      x-apifox-folder: customerservice
    TicketCreateRequest:
      type: object
      properties:
        order_id:
          type: integer
          minimum: 1
        order_item_id:
          type: integer
          minimum: 1
        shipment_id:
          type: integer
          minimum: 1
        issue_type:
          $ref: '#/components/schemas/CsTicketIssueType'
        title:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
          maxLength: 2000
        attachments:
          type: array
          items:
            type: string
            description: 上传的附件链接
          maxItems: 20
        evidence:
          type: array
          items:
            type: string
            description: 上传的证据链接
          maxItems: 50
        requested_refund_amount:
          type: integer
          minimum: 1
        currency:
          type: string
      required:
        - issue_type
        - title
        - order_id
        - currency
      x-apifox-orders:
        - order_id
        - order_item_id
        - shipment_id
        - issue_type
        - title
        - description
        - attachments
        - evidence
        - requested_refund_amount
        - currency
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketStatusTransitionRequest:
      type: object
      properties:
        to_status:
          $ref: '#/components/schemas/CsTicketStatus'
        note:
          type: string
          maxLength: 255
        source_ref:
          type: string
          maxLength: 128
      required:
        - to_status
      x-apifox-orders:
        - to_status
        - note
        - source_ref
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketCloseRequest:
      type: object
      properties:
        note:
          type: string
          maxLength: 255
      x-apifox-orders:
        - note
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketReadRequest:
      type: object
      properties:
        last_read_message_id:
          type: integer
          description: 不可回退
      required:
        - last_read_message_id
      x-apifox-orders:
        - last_read_message_id
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketMessageCreateRequest:
      type: object
      properties:
        message_type:
          $ref: '#/components/schemas/CsMessageType'
        content:
          type: string
          maxLength: 4000
          description: 不能为空
        attachments:
          type: array
          items:
            type: string
            description: 上传的附件链接
          maxItems: 20
        client_message_id:
          type: string
          description: 客户端消息幂等键
          maxLength: 64
      required:
        - client_message_id
        - content
      x-apifox-orders:
        - message_type
        - content
        - attachments
        - client_message_id
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketMessageUpdateRequest:
      type: object
      properties:
        content:
          type: string
          maxLength: 4000
          description: 不能为空
      x-apifox-orders:
        - content
      required:
        - content
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketMessageRecallRequest:
      type: object
      properties:
        reason:
          type: string
          maxLength: 255
      x-apifox-orders:
        - reason
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminTicketPatchRequest:
      type: object
      properties:
        priority:
          $ref: '#/components/schemas/CsTicketPriority'
        tags:
          type: array
          items:
            type: string
            maxLength: 64
          maxItems: 50
        requested_refund_amount:
          type: integer
          minimum: 1
        currency:
          type: string
          minLength: 3
          maxLength: 3
        claim_external_id:
          type: string
          maxLength: 128
        sla_due_at:
          type: string
          format: date-time
      x-apifox-orders:
        - priority
        - tags
        - requested_refund_amount
        - currency
        - claim_external_id
        - sla_due_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminTicketAssignRequest:
      type: object
      properties:
        to_assignee_user_id:
          type: integer
          minimum: 1
        action_type:
          $ref: '#/components/schemas/CsAssignmentActionType'
        note:
          type: string
          maxLength: 255
        source_ref:
          type: string
          maxLength: 128
      required:
        - action_type
      x-apifox-orders:
        - to_assignee_user_id
        - action_type
        - note
        - source_ref
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminTicketParticipantCreateRequest:
      type: object
      properties:
        participant_type:
          $ref: '#/components/schemas/CsParticipantType'
        participant_user_id:
          type: integer
          minimum: 1
        role:
          $ref: '#/components/schemas/CsParticipantRole'
      required:
        - participant_type
        - role
      x-apifox-orders:
        - participant_type
        - participant_user_id
        - role
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminTicketParticipantPatchRequest:
      type: object
      properties:
        role:
          $ref: '#/components/schemas/CsParticipantRole'
      required:
        - role
      x-apifox-orders:
        - role
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminReshipCreateRequest:
      type: object
      properties:
        order_id:
          type: integer
          minimum: 1
        reason_code:
          $ref: '#/components/schemas/AfterSalesReshipReasonCode'
        currency:
          type: string
          minLength: 3
          maxLength: 3
        note:
          type: string
          maxLength: 255
        items:
          type: array
          minItems: 1
          items:
            $ref: '#/components/schemas/AdminReshipCreateItem'
      required:
        - order_id
        - reason_code
        - items
      x-apifox-orders:
        - order_id
        - reason_code
        - currency
        - note
        - items
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminReshipCreateItem:
      type: object
      properties:
        order_item_id:
          type: integer
          minimum: 1
        sku_id:
          type: integer
          minimum: 1
        quantity:
          type: integer
          minimum: 1
      required:
        - order_item_id
        - sku_id
        - quantity
      x-apifox-orders:
        - order_item_id
        - sku_id
        - quantity
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminReshipStatusTransitionRequest:
      type: object
      properties:
        to_status:
          $ref: '#/components/schemas/AfterSalesReshipStatus'
        note:
          type: string
          maxLength: 255
      required:
        - to_status
      x-apifox-orders:
        - to_status
        - note
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminReshipPatchRequest:
      type: object
      properties:
        currency:
          type: string
          minLength: 3
          maxLength: 3
        items_cost:
          type: string
          description: 货物成本 Major 形式
        shipping_cost:
          type: string
          description: 运费成本 Major 形式
        note:
          type: string
          maxLength: 255
      x-apifox-orders:
        - currency
        - items_cost
        - shipping_cost
        - note
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminReshipBindShipmentsRequest:
      type: object
      properties:
        shipment_ids:
          type: array
          minItems: 1
          items:
            type: integer
            minimum: 1
      required:
        - shipment_ids
      x-apifox-orders:
        - shipment_ids
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketCreateData:
      type: object
      properties:
        ticket_id:
          type: integer
          minimum: 1
        ticket_no:
          type: string
        status:
          $ref: '#/components/schemas/CsTicketStatus'
        created_at:
          type: string
          format: date-time
      required:
        - ticket_id
        - ticket_no
        - status
        - created_at
      x-apifox-orders:
        - ticket_id
        - ticket_no
        - status
        - created_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    UserTicketSummary:
      type: object
      properties:
        ticket_no:
          type: string
        issue_type:
          $ref: '#/components/schemas/CsTicketIssueType'
        status:
          $ref: '#/components/schemas/CsTicketStatus'
        title:
          type: string
        order_id:
          type: integer
        order_no:
          type: string
          description: 订单号
        order_status:
          $ref: '#/components/schemas/OrderStatus'
        pay_amount:
          type: string
        order_cover:
          type: string
          description: 订单封面，取 order_item 中第一项的 sku_attrs 的 sku 缩略图
        shipment_id:
          type:
            - integer
            - 'null'
        shipment_status:
          anyOf:
            - $ref: '#/components/schemas/ShipmentStatus'
            - type: 'null'
        shipment_status_log_snapshot:
          type: string
          description: 最近的一条物流单 status_log 的 note
        assigned_to_user_id:
          type:
            - integer
            - 'null'
        last_message_at:
          type:
            - string
            - 'null'
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - ticket_no
        - issue_type
        - status
        - title
        - created_at
        - updated_at
        - order_id
        - order_status
        - pay_amount
        - order_cover
        - order_no
        - shipment_status_log_snapshot
      x-apifox-orders:
        - ticket_no
        - issue_type
        - status
        - title
        - order_id
        - order_no
        - order_status
        - pay_amount
        - order_cover
        - shipment_id
        - shipment_status
        - shipment_status_log_snapshot
        - assigned_to_user_id
        - last_message_at
        - created_at
        - updated_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    UserTicketDetail:
      type: object
      properties:
        ticket_no:
          type: string
        issue_type:
          $ref: '#/components/schemas/CsTicketIssueType'
        status:
          $ref: '#/components/schemas/CsTicketStatus'
        title:
          type: string
        order_id:
          type: integer
        order_no:
          type: string
          description: 订单号
        order_status:
          $ref: '#/components/schemas/OrderStatus'
        pay_amount:
          type: string
        order_cover:
          type: string
          description: 订单封面，取 order_item 中第一项的 sku_attrs 的 sku 缩略图
        shipment_id:
          type:
            - integer
            - 'null'
        shipment_status:
          anyOf:
            - $ref: '#/components/schemas/ShipmentStatus'
            - type: 'null'
        shipment_status_log_snapshot:
          type: string
          description: 最近的一条物流单 status_log 的 note
        assigned_to_user_id:
          type:
            - integer
            - 'null'
        last_message_at:
          type:
            - string
            - 'null'
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        description:
          type:
            - string
            - 'null'
        attachments:
          type: array
          items:
            type: string
            description: 上传的附件链接
        evidence:
          type: array
          items:
            type: string
            description: 上传的证据链接
        tags:
          type: array
          items:
            type: string
        requested_refund_amount:
          type:
            - integer
            - 'null'
        currency:
          type:
            - string
            - 'null'
        resolved_at:
          type:
            - string
            - 'null'
          format: date-time
        closed_at:
          type:
            - string
            - 'null'
          format: date-time
        sla_due_at:
          type:
            - string
            - 'null'
          format: date-time
      required:
        - ticket_no
        - issue_type
        - status
        - title
        - created_at
        - updated_at
        - order_id
        - order_status
        - pay_amount
        - order_cover
        - order_no
        - shipment_status_log_snapshot
      x-apifox-orders:
        - ticket_no
        - issue_type
        - status
        - title
        - order_id
        - order_no
        - order_status
        - pay_amount
        - order_cover
        - shipment_id
        - shipment_status
        - shipment_status_log_snapshot
        - assigned_to_user_id
        - last_message_at
        - created_at
        - updated_at
        - description
        - attachments
        - evidence
        - tags
        - requested_refund_amount
        - currency
        - resolved_at
        - closed_at
        - sla_due_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminTicketSummary:
      type: object
      properties:
        ticket_id:
          type: integer
          minimum: 1
        ticket_no:
          type: string
        user_id:
          type: integer
          minimum: 1
        issue_type:
          $ref: '#/components/schemas/CsTicketIssueType'
        status:
          $ref: '#/components/schemas/CsTicketStatus'
        priority:
          $ref: '#/components/schemas/CsTicketPriority'
        channel:
          $ref: '#/components/schemas/CsTicketChannel'
        title:
          type: string
        order_id:
          type:
            - integer
            - 'null'
        order_item_id:
          type:
            - integer
            - 'null'
        shipment_id:
          type:
            - integer
            - 'null'
        assigned_to_user_id:
          type:
            - integer
            - 'null'
        assigned_at:
          type:
            - string
            - 'null'
          format: date-time
        last_message_at:
          type:
            - string
            - 'null'
          format: date-time
        sla_due_at:
          type:
            - string
            - 'null'
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - ticket_id
        - ticket_no
        - user_id
        - issue_type
        - status
        - priority
        - channel
        - title
        - created_at
        - updated_at
      x-apifox-orders:
        - ticket_id
        - ticket_no
        - user_id
        - issue_type
        - status
        - priority
        - channel
        - title
        - order_id
        - order_item_id
        - shipment_id
        - assigned_to_user_id
        - assigned_at
        - last_message_at
        - sla_due_at
        - created_at
        - updated_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    AdminTicketDetail:
      type: object
      properties:
        ticket_id:
          type: integer
          minimum: 1
        ticket_no:
          type: string
        user_id:
          type: integer
          minimum: 1
        issue_type:
          $ref: '#/components/schemas/CsTicketIssueType'
        status:
          $ref: '#/components/schemas/CsTicketStatus'
        priority:
          $ref: '#/components/schemas/CsTicketPriority'
        channel:
          $ref: '#/components/schemas/CsTicketChannel'
        title:
          type: string
        order_id:
          type:
            - integer
            - 'null'
        order_item_id:
          type:
            - integer
            - 'null'
        shipment_id:
          type:
            - integer
            - 'null'
        assigned_to_user_id:
          type:
            - integer
            - 'null'
        assigned_at:
          type:
            - string
            - 'null'
          format: date-time
        last_message_at:
          type:
            - string
            - 'null'
          format: date-time
        sla_due_at:
          type:
            - string
            - 'null'
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        description:
          type:
            - string
            - 'null'
        attachments:
          type: array
          items:
            type: string
            description: 上传的附件链接
        evidence:
          type: array
          items:
            type: string
            description: 上传的证据链接
        tags:
          type: array
          items:
            type: string
        requested_refund_amount:
          type:
            - integer
            - 'null'
        currency:
          type:
            - string
            - 'null'
        claim_external_id:
          type:
            - string
            - 'null'
        source_ref:
          type:
            - string
            - 'null'
        resolved_at:
          type:
            - string
            - 'null'
          format: date-time
        closed_at:
          type:
            - string
            - 'null'
          format: date-time
      required:
        - ticket_id
        - ticket_no
        - user_id
        - issue_type
        - status
        - priority
        - channel
        - title
        - created_at
        - updated_at
      x-apifox-orders:
        - ticket_id
        - ticket_no
        - user_id
        - issue_type
        - status
        - priority
        - channel
        - title
        - order_id
        - order_item_id
        - shipment_id
        - assigned_to_user_id
        - assigned_at
        - last_message_at
        - sla_due_at
        - created_at
        - updated_at
        - description
        - attachments
        - evidence
        - tags
        - requested_refund_amount
        - currency
        - claim_external_id
        - source_ref
        - resolved_at
        - closed_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketMessage:
      type: object
      properties:
        id:
          type: integer
          minimum: 1
        message_no:
          type: string
        ticket_id:
          type: integer
          minimum: 1
        sender_type:
          $ref: '#/components/schemas/CsParticipantType'
        sender_user_id:
          type:
            - integer
            - 'null'
        message_type:
          $ref: '#/components/schemas/CsMessageType'
        content:
          type:
            - string
            - 'null'
        attachments:
          type: array
          items:
            type: string
            description: 上传的附件链接
        client_message_id:
          type:
            - string
            - 'null'
        sent_at:
          type: string
          format: date-time
        edited_at:
          type:
            - string
            - 'null'
          format: date-time
        recalled_at:
          type:
            - string
            - 'null'
          format: date-time
      required:
        - id
        - message_no
        - ticket_id
        - sender_type
        - message_type
        - sent_at
      x-apifox-orders:
        - id
        - message_no
        - ticket_id
        - sender_type
        - sender_user_id
        - message_type
        - content
        - attachments
        - client_message_id
        - sent_at
        - edited_at
        - recalled_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketStatusLog:
      type: object
      properties:
        id:
          type: integer
          minimum: 1
        ticket_id:
          type: integer
          minimum: 1
        from_status:
          oneOf:
            - $ref: '#/components/schemas/CsTicketStatus'
            - type: 'null'
        to_status:
          $ref: '#/components/schemas/CsTicketStatus'
        actor_type:
          $ref: '#/components/schemas/CsActorType'
        actor_user_id:
          type:
            - integer
            - 'null'
        source_ref:
          type:
            - string
            - 'null'
        note:
          type:
            - string
            - 'null'
        created_at:
          type: string
          format: date-time
      required:
        - id
        - ticket_id
        - to_status
        - actor_type
        - created_at
      x-apifox-orders:
        - id
        - ticket_id
        - from_status
        - to_status
        - actor_type
        - actor_user_id
        - source_ref
        - note
        - created_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketAssignmentLog:
      type: object
      properties:
        id:
          type: integer
          minimum: 1
        ticket_id:
          type: integer
          minimum: 1
        from_assignee_user_id:
          type:
            - integer
            - 'null'
        to_assignee_user_id:
          type:
            - integer
            - 'null'
        action_type:
          $ref: '#/components/schemas/CsAssignmentActionType'
        actor_type:
          $ref: '#/components/schemas/CsActorType'
        actor_user_id:
          type:
            - integer
            - 'null'
        source_ref:
          type:
            - string
            - 'null'
        note:
          type:
            - string
            - 'null'
        created_at:
          type: string
          format: date-time
      required:
        - id
        - ticket_id
        - action_type
        - actor_type
        - created_at
      x-apifox-orders:
        - id
        - ticket_id
        - from_assignee_user_id
        - to_assignee_user_id
        - action_type
        - actor_type
        - actor_user_id
        - source_ref
        - note
        - created_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    TicketParticipant:
      type: object
      properties:
        id:
          type: integer
          minimum: 1
        ticket_id:
          type: integer
          minimum: 1
        participant_type:
          $ref: '#/components/schemas/CsParticipantType'
        participant_user_id:
          type:
            - integer
            - 'null'
        role:
          $ref: '#/components/schemas/CsParticipantRole'
        joined_at:
          type: string
          format: date-time
        left_at:
          type:
            - string
            - 'null'
          format: date-time
        last_read_message_id:
          type:
            - integer
            - 'null'
        last_read_at:
          type:
            - string
            - 'null'
          format: date-time
      required:
        - id
        - ticket_id
        - participant_type
        - role
        - joined_at
      x-apifox-orders:
        - id
        - ticket_id
        - participant_type
        - participant_user_id
        - role
        - joined_at
        - left_at
        - last_read_message_id
        - last_read_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    ReshipSummary:
      type: object
      properties:
        id:
          type: integer
          minimum: 1
        reship_no:
          type: string
        order_id:
          type: integer
          minimum: 1
        ticket_id:
          type:
            - integer
            - 'null'
        reason_code:
          $ref: '#/components/schemas/AfterSalesReshipReasonCode'
        status:
          $ref: '#/components/schemas/AfterSalesReshipStatus'
        currency:
          type: string
        items_cost:
          type:
            - integer
            - 'null'
        shipping_cost:
          type:
            - integer
            - 'null'
        note:
          type:
            - string
            - 'null'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - reship_no
        - order_id
        - reason_code
        - status
        - currency
        - created_at
        - updated_at
      x-apifox-orders:
        - id
        - reship_no
        - order_id
        - ticket_id
        - reason_code
        - status
        - currency
        - items_cost
        - shipping_cost
        - note
        - created_at
        - updated_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    ReshipItem:
      type: object
      properties:
        id:
          type: integer
          minimum: 1
        reship_id:
          type: integer
          minimum: 1
        order_item_id:
          type: integer
          minimum: 1
        sku_id:
          type: integer
          minimum: 1
        quantity:
          type: integer
          minimum: 1
      required:
        - id
        - reship_id
        - order_item_id
        - sku_id
        - quantity
      x-apifox-orders:
        - id
        - reship_id
        - order_item_id
        - sku_id
        - quantity
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    ReshipShipment:
      type: object
      properties:
        reship_id:
          type: integer
          minimum: 1
        shipment_id:
          type: integer
          minimum: 1
        created_at:
          type: string
          format: date-time
      required:
        - reship_id
        - shipment_id
        - created_at
      x-apifox-orders:
        - reship_id
        - shipment_id
        - created_at
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
    ReshipDetail:
      type: object
      properties:
        id:
          type: integer
          minimum: 1
        reship_no:
          type: string
        order_id:
          type: integer
          minimum: 1
        ticket_id:
          type:
            - integer
            - 'null'
        reason_code:
          $ref: '#/components/schemas/AfterSalesReshipReasonCode'
        status:
          $ref: '#/components/schemas/AfterSalesReshipStatus'
        currency:
          type: string
        items_cost:
          type:
            - integer
            - 'null'
        shipping_cost:
          type:
            - integer
            - 'null'
        note:
          type:
            - string
            - 'null'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        items:
          type: array
          items:
            $ref: '#/components/schemas/ReshipItem'
        shipments:
          type: array
          items:
            $ref: '#/components/schemas/ReshipShipment'
      required:
        - id
        - reship_no
        - order_id
        - reason_code
        - status
        - currency
        - created_at
        - updated_at
      x-apifox-orders:
        - id
        - reship_no
        - order_id
        - ticket_id
        - reason_code
        - status
        - currency
        - items_cost
        - shipping_cost
        - note
        - created_at
        - updated_at
        - items
        - shipments
      x-apifox-ignore-properties: []
      x-apifox-folder: customerservice
  responses:
    已创建:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
    参数错误:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
          examples:
            空值或格式错误:
              summary: 空值或格式错误
              value:
                success: false
                code: BAD_REQUEST
                message: 用户名不能为空
                timestamp: '2025-11-06 11:38:39'
    已接受:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
    重定向:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
    未鉴权:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
          examples:
            示例 1:
              summary: 示例 1
              value:
                success: false
                code: UNAUTHORIZED
                message: Unauthorized
                timestamp: '2025-11-15 14:23:57'
    权限不足:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
          examples:
            示例 1:
              summary: 示例 1
              value:
                success: false
                code: FORBIDDEN
                message: Access denied
                timestamp: '2025-11-06 17:31:36'
    冲突:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
          examples:
            示例 1:
              summary: 示例 1
              value:
                success: false
                code: CONFLICT
                message: 邮箱已被使用
                timestamp: '2025-11-15 14:23:56'
    无法处理的实体:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
          examples:
            示例 1:
              summary: 示例 1
              value:
                success: false
                code: UNPROCESSABLE_ENTITY
                message: 验证码错误或已过期
                timestamp: '2025-11-06 15:28:11'
    服务器内部错误:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
    请求过多:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
          examples:
            示例 1:
              summary: 示例 1
              value:
                success: false
                code: TOO_MANY_REQUESTS
                message: 尝试次数过多, 请过段时间再试
                timestamp: '2025-11-15 14:25:35'
    未找到:
      description: ''
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Result'
  securitySchemes: {}
servers: []
security: []
